<!doctype html>
<html><head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="mobile-web-app-capable" content="yes"/>
<title>REAPER Web Control - Fancier</title>
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,700" rel="stylesheet" type="text/css">
<script src="main.js"></script>


<!-- FANCIER ------------------------  -->
<style type="text/css">
    
    body {
        background-color:#000;
        color:#A9ABAB;
        font-family: 'Open Sans',sans-serif;
        font-size: 0.9em;
        margin:0px -19vw;
        user-select: none;
        cursor: default;
        }
    
    #colWrap {
        display:flex;
        flex-direction: column;
        }
    #col1 {
            flex-basis:100%;
        }
    #tracks {
            flex-basis:100%;
            }
    @media only screen 
      and (min-device-width: 768px) 
      and (orientation: landscape) 
      and (-webkit-min-device-pixel-ratio: 1) {
        #colWrap {
            flex-direction: column;
            }  
        #col1 {
            flex-basis:50%;
            }
        #tracks {
            flex-basis:50%;
            border-left-style:solid;
            border-left-color: #1A1A1A;
            }
        }
    
    #optionsBar {}
    
    .trackRow1{
        will-change: transform;
        }
    .trackRow2{
        will-change: transform;
        }
    
    .optionsBar {
        height : 0px;
        
        }
    .button:hover .mouseover {
        visibility:visible;
        }
    .button:active .mouseover {
        visibility:hidden;
        pointer-events:all;
        }
    .button:active .shadow {
        visibility: hidden;
        }
    .button:active .gloss {
        visibility: hidden;
        }
    .button:active .active {
        visibility: visible;
        }

    /* Viktor styles */ 
    .regions-and-markers-view {
        margin-top: -8vw;
    }

    .transportCounter {
        margin-left: -vw;
    }

    #marker1Number,#marker2Number,#marker3Number {
        display: none;
    }

    .iframe-container {
        position: absolute;
        overflow: hidden;
        width: 120vw;
        top: 20vw;
        padding-top: 10vw;
        height: 100%;
    }

    /* Then style the iframe to fit in the container div with full height and width */
    .responsive-iframe {
        position: absolute;
        margin-top: -130px;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        border-width: 0;

    }
    

</style>

<script type="text/javascript">
            
wwr_req_recur("TRANSPORT;BEATPOS",10);
wwr_req_recur("NTRACK;TRACK;GET/40364;GET/1157",10);
wwr_req_recur("MARKER;REGION",10);
wwr_start();  

var last_transport_state = -1, mouseDown = 0, last_time_str = "",
    last_metronome = false,  nTrack = 0, last_repeat = false, snapState = 0,
    drawnSig=0, drawnBeat=0, ts_numerator=0, ts_denominator=0, playPosSeconds=0, statusPosition=[], statusPositionAr=[],
    startX = 0, joggerAgg = 0, recarmCountAr = [], recarmCount = 0, newPos = -1,
    trackHeightsAr = [], trackColoursAr = [], trackNumbersAr = [], trackNamesAr = [],  trackVolumeAr = [],
    trackFlagsAr = [], trackSendCntAr = [], trackRcvCntAr = [], trackHwOutCntAr = [], trackSendHwCntAr = [], trackPeakAr = [], trackMeterAr = [], faderConAr = [],
    hereCss = document.styleSheets[1], transitions = 1;    
    
function setTextForObject(obj, text) { 
  if (obj.lastChild) obj.lastChild.nodeValue = text;
  else obj.appendChild(document.createTextNode(text));
  } 
    
function lumaOffset(c){
    var c = c.substring(1);
    var rgb = parseInt(c, 16);
    var r = (rgb >> 16) & 0xff;
    var g = (rgb >>  8) & 0xff;
    var b = (rgb >>  0) & 0xff;
    var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;
    function componentToHex(c) {
        var hex = c.toString(16);
        return hex.length == 1 ? "0" + hex : hex;
        }
    if (luma < 150) {r = r+150; g = g+150; b = b+150}
    if (luma > 150) {r = r-120; g = g-120; b = b-120}
    if(r<0){r=0}; if(g<0){g=0}; if(b<0){b=0}
    if(r>255){r=255}; if(g>255){g=255}; if(b>255){b=255}
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}    

function mouseDownEventHandler(msg) {
  return function(e) {
    if (typeof e == 'undefined') e=event;
    if (e.preventDefault) e.preventDefault();
    wwr_req(msg);
    return false;
  }
}

var thisSendTrackId=0, sendOutputdB=0;
    
  
function elAttribute(id,attribute,value){
    if(document.getElementById(id)){
        document.getElementById(id).setAttributeNS(null, attribute, value);
        }
    }
    
    
function wwr_onreply(results) {
   /*var resultsDisplay = document.getElementById("_results");
    if(resultsDisplay!=null){
        var _backLoaded = document.getElementById("backLoad");
        _backLoaded.style.display = "block";
        resultsDisplay.innerHTML = results;
        } */
    
  var ar = results.split("\n");
  for (var x=0;x<ar.length;x++) {
    var tok = ar[x].split("\t");
    if (tok.length > 0) switch (tok[0]) {
      case "TRANSPORT":
        if (tok.length > 4) {
            var backLoaded = document.getElementById("backLoad");
            if(backLoaded!=null){
                if (tok[1] != last_transport_state) {
                last_transport_state=tok[1];
                document.getElementById("playButtonOff").style.visibility = (last_transport_state&1) ? "hidden" : "visible"; 
                document.getElementById("playButtonOn").style.visibility = (last_transport_state&1) ? "visible" : "hidden"; 
                document.getElementById("pauseButtonOff").style.visibility = (last_transport_state&2) ? "hidden" : "visible"; 
                document.getElementById("pauseButtonOn").style.visibility = (last_transport_state&2) ? "visible" : "hidden";
                document.getElementById("record_off").style.visibility = (last_transport_state&4) ? "hidden" : "";
                document.getElementById("record_on").style.visibility = (last_transport_state&4) ? "visible" : "";
                document.getElementById("armed_text").style.visibility = (last_transport_state&4) ? "hidden" : "";
                document.getElementById("armed_count").style.visibility = (last_transport_state&4) ? "hidden" : "";
                document.getElementById("abort_text").style.visibility = (last_transport_state&4) ? "visible" : "";
                document.getElementById("abort_cross").style.visibility = (last_transport_state&4) ? "visible" : "";
                }
            if (tok[3] != last_repeat) {
                last_repeat = tok[3];
                document.getElementById("repeat_off").style.visibility = (last_repeat>0) ? "hidden" : "";
                document.getElementById("repeat_on").style.visibility = (last_repeat>0) ? "visible" : "";
                }
            var statusDisplay = document.getElementById("status");
                
            //make an array of the current position and its unit
            statusPosition[0] = tok[4];
            statusPositionAr = tok[4].split(".");
            if(statusPositionAr[1]==undefined){
                if(statusPositionAr[0].match(":")){statusPosition[1] = "Hours:Minutes:Seconds:Frames";}
                else{statusPosition[1] = "samples / frames";}
                }
            else{if(statusPositionAr[1].length==3){
                    if(statusPositionAr[0].match(":")){statusPosition[1] = "Minutes:Seconds";}
                    else{statusPosition[1] = "Seconds";}
                    }
                  else{statusPosition[1] = "Measures.Beats";}
                }
            document.getElementById("timeUnits").textContent = statusPosition[1];    
            
            joggerAggSign = Math.sign(joggerAgg);
            if(joggerAgg!=0){
                var joggerAggExp = Math.exp(Math.abs(joggerAgg)) * Math.sign(joggerAgg);
                if(statusPosition[1]=="Measures.Beats"){
                    statusJogging = BtoMB(Math.floor(Math.exp(Math.abs(joggerAgg)))) * Math.sign(joggerAgg) + ".00";
                    }
                else{statusJogging = joggerAggExp.toPrecision(4) + " s";} 
                statusDisplay.textContent = statusJogging;
                statusDisplay.style.fill = (joggerAggSign<0) ? "#FE003B" : "#00FE95";
                }
            else {
                statusDisplay.textContent = statusPosition[0];
                statusDisplay.style.fill = "#a8a8a8";
                }
            if (tok[2] != playPosSeconds) {playPosSeconds=tok[2];}    
        }
            last_time_str = tok[4];
        }
      break;
      case "CMDSTATE":
        var buttonMetro = document.getElementById("buttonMetro");     
        if (tok[1] == 40364 && buttonMetro) {
            if(last_metronome==1){
                    buttonMetro.childNodes[3].setAttributeNS(null, "visibility", "visible");
                    buttonMetro.childNodes[7].setAttributeNS(null, "visibility", "hidden");
                    }
                else{
                    buttonMetro.childNodes[3].setAttributeNS(null, "visibility", "hidden");
                    buttonMetro.childNodes[7].setAttributeNS(null, "visibility", "visible");
                    }
                last_metronome = tok[2];
            }    
        var buttonSnap = document.getElementById("buttonSnap");    
        if (tok[1] == 1157 && buttonSnap) {
            if (tok[2] != snapState) {
                if(snapState==0){
                    buttonSnap.childNodes[3].setAttributeNS(null, "visibility", "visible");
                    buttonSnap.childNodes[7].setAttributeNS(null, "visibility", "hidden");
                    }
                else{
                    buttonSnap.childNodes[3].setAttributeNS(null, "visibility", "hidden");
                    buttonSnap.childNodes[7].setAttributeNS(null, "visibility", "visible");
                    }
                snapState = tok[2];
                }
            }
      break;
      case "BEATPOS":
        var playLine = document.querySelector('#playLine');    
        if (tok.length > 5 && playLine) {
            var playLineCirc = 301.1;
            var playLineArc = playLineCirc - (playLineCirc / tok[6]);
            //var playLineRotate = (360 / tok[6]) * tok[5]; //freewheeling play line
            thisBeat=Math.round(tok[5]);
            var playLineRotate = (360 / tok[6]) * thisBeat;
            thisSig=tok[6];
                if (drawnSig!=thisSig || drawnBeat!=thisBeat && playLine){ 
                    playLine.setAttributeNS(null, "stroke-dasharray", playLineCirc);
                    playLine.setAttributeNS(null, "stroke-dashoffset", playLineArc);
                    playLine.setAttribute("transform","rotate(" + playLineRotate + ",151.8,52.4)");
                    }
            ts_numerator = tok[6];
            ts_denominator = tok[7];
            document.getElementById("tsNum").textContent = ts_numerator;
            document.getElementById("tsDen").textContent = ts_denominator;
              }
      break; 
            
      case "REGION_LIST":
            g_regions = []; 
            break;
      case "REGION":
            g_regions.push(tok);
            break;
      case "MARKER_LIST":
            g_markers = []; 
            break;
      case "MARKER":
            g_markers.push(tok);
            break;
      case "MARKER_LIST_END":
            var pos = parseFloat(playPosSeconds);
            var previ=-1, thisi=-1, nexti=-1;
        break; 
            
        case "REGION_LIST_END":
            
            //assemble mrMap array : time, marker number, region start number, region end number.
            for (var i=0; i<g_regions.length; i++) {
                if(g_regions[i][5]==0){g_regions[i][5]=25198720;} // Give uncoloured regions a colour.
                }
            for (var i=0; i<g_markers.length; i++) {
                if(g_markers[i][4]==0){g_markers[i][4]=25198720;} // Give uncoloured markers a colour.
                }
            var mrMapAr = [];
            for (var i=0; i<g_regions.length*2; i++) {
                mrMapAr[i] = [];
                if(i<g_regions.length){                             //add the region starts to the ar
                    mrMapAr[i][0] = g_regions[i][3];
                    mrMapAr[i][2] = g_regions[i][2];
                    }
                else{                                               //add the region ends to the ar
                    mrMapAr[i][0] = g_regions[i-g_regions.length][4];
                    mrMapAr[i][3] = g_regions[i-g_regions.length][2];
                    }
                }
            for (var i=0; i<g_markers.length; i++) {                //add the markers to the ar
                mrMapAr[i+(g_regions.length*2)] = [];
                mrMapAr[i+(g_regions.length*2)][0] = g_markers[i][3];
                mrMapAr[i+(g_regions.length*2)][1] = g_markers[i][2];
                }
            
            for (var i=0; i<mrMapAr.length; i++) {                  //prep times for sorting
                posToSix = parseFloat(mrMapAr[i][0]).toFixed(6);
                mrMapAr[i][0] = parseFloat(posToSix);
                }
            
            mrMapAr.sort(function(a, b) {                           //sort into time order
                return (a[0] === b[0] ? 0 : (a[0] < b[0] ? -1 : 1));
                });
            
            function mergeAt(idx){
                if(mrMapAr[i-1][idx]){a=mrMapAr[i-1][idx]}else{a=0};
                if(mrMapAr[i][idx]){b=mrMapAr[i][idx]}else{b=0};
                mrMapAr[i-1][idx] = parseFloat(a)+parseFloat(b); 
                }
            
            var mergeDone=0;        
            for (var i=1; i<mrMapAr.length; i++) {                  //merge cells if at same time, delete the duplicate
                if(mrMapAr[i-1] && mrMapAr[i][0]===mrMapAr[i-1][0]){
                    mergeAt(1); mergeAt(2); mergeAt(3);
                    mrMapAr.splice(i,1);
                    }
                if(i==(mrMapAr.length-1)){mergeDone=1}
                }
            
            var prevl=-1, thisl=-1, nextl=-1;
            if(mergeDone==1){
                for (var i=0; i<mrMapAr.length; i++){
                    var diff = (mrMapAr[i][0] - pos);
                    if(diff<0){
                        if(i>prevl){prevl = i}
                        }
                    if (diff==0) {thisl = i};
                    if(diff>0){
                        if(i>nextl){nextl = i; break;}
                        }
                    }
                }
            
            function getValuesFromId(array,id,colourIdx) {
                for (var i=0, len=array.length; i<len; i++) {
                    if(array[i][2]==id){return [id,(array[i][1]),(array[i][colourIdx])]}
                    }
                return [0,0,0];
                }
             
            var nextPrevSvg = document.getElementById("nextPrev")
            if((pos!=newPos || mrMapAr.length!=newMrMapLength) && mergeDone==1 && nextPrevSvg){
                var rIdxAsg = [];
                search: for(i=0; i<4; i++){                         // 4 is the maximum drawable number of regions
                    if(mrMapAr[prevl] && mrMapAr[prevl][3]>=1){               //region end at prev?
                        var q = parseFloat(mrMapAr[prevl][3]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q; continue search;}
                        }
                    if(mrMapAr[prevl] && mrMapAr[prevl][2]>=1){               //region start at prev?
                        var q = parseFloat(mrMapAr[prevl][2]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q; continue search;}
                        }
                    if(mrMapAr[thisl] && mrMapAr[thisl][3]>=1){               //region end at this?
                        var q = parseFloat(mrMapAr[thisl][3]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q; continue search;}
                        }
                    if(mrMapAr[thisl] && mrMapAr[thisl][2]>=1){               //region start at this?
                        var q = parseFloat(mrMapAr[thisl][2]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q;continue search;}
                        }
                    if(mrMapAr[nextl] && mrMapAr[nextl][3]>=1){               //region end at next?
                        var q = parseFloat(mrMapAr[nextl][3]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q; continue search}
                        }
                    if(mrMapAr[nextl] && mrMapAr[nextl][2]>=1){               //region start at next?
                        var q = parseFloat(mrMapAr[nextl][2]);
                            if(rIdxAsg.indexOf(q)==-1){rIdxAsg[i] = q;}
                        }
                    }
                
                function getValFromAr(array,id,idLoc,valLoc) {
                    for (var i=0, len=array.length; i<len; i++) {
                        if(array[i][idLoc]==id){return array[i][valLoc];}
                        }
                    return;
                    }
                
                for(i=1;i<5;i++){
                    this['r'+i+'StalkLx'] = 45.6; 
                    this['r'+i+'StalkRx'] = 273.1;
                    if(rIdxAsg[i-1] && rIdxAsg[i-1]>=0){
                        this['r'+i+'Idx'] = rIdxAsg[i-1];
                        this['r'+i+'Name'] = getValFromAr(g_regions,rIdxAsg[i-1],2,1);
                        this['col'+i] = getValFromAr(g_regions,rIdxAsg[i-1],2,5);
                        this['rCol'+i] = "#" + (this['col'+i]|0x1000000).toString(16).substr(-6);
                        if(prevl>=0 && mrMapAr[prevl][3] == rIdxAsg[i-1]){this['r'+i+'StalkRx'] = 102.5;}
                        if(prevl>=0 && mrMapAr[prevl][2] == rIdxAsg[i-1]){this['r'+i+'StalkLx'] = 102.5;}
                        if(thisl>=0 && mrMapAr[thisl][2] == rIdxAsg[i-1]){this['r'+i+'StalkLx'] = 159.4;}
                        if(thisl>=0 && mrMapAr[thisl][3] == rIdxAsg[i-1]){this['r'+i+'StalkRx'] = 159.4;}
                        if(nextl>=0 && mrMapAr[nextl][2] == rIdxAsg[i-1]){this['r'+i+'StalkLx'] = 216.2;}
                        if(nextl>=0 && mrMapAr[nextl][3] == rIdxAsg[i-1]){this['r'+i+'StalkRx'] = 216.2;}
                        document.getElementById('region'+i).setAttributeNS(null, "visibility", "visible");
                        document.getElementById('r'+i+'Rect').setAttributeNS(null, "fill", this['rCol'+i]);
                        document.getElementById('r'+i+'StalkL').setAttributeNS(null, "x1", this['r'+i+'StalkLx']);
                        document.getElementById('r'+i+'StalkL').setAttributeNS(null, "x2", this['r'+i+'StalkLx']);
                        document.getElementById('r'+i+'StalkR').setAttributeNS(null, "x1", this['r'+i+'StalkRx']);
                        document.getElementById('r'+i+'StalkR').setAttributeNS(null, "x2", this['r'+i+'StalkRx']);
                        this['r'+i+'RectW'] = (this['r'+i+'StalkRx']) - (this['r'+i+'StalkLx']);
                        document.getElementById('r'+i+'Rect').setAttributeNS(null, "x", this['r'+i+'StalkLx']);
                        document.getElementById('r'+i+'Rect').setAttributeNS(null, "width", this['r'+i+'RectW']);
                        if(!this['r'+i+'Name']){this['r'+i+'Name'] = this['r'+i+'Idx']}
                        document.getElementById('r'+i+'Name').textContent = this['r'+i+'Name'];
                        document.getElementById('r'+i+'Name').setAttributeNS(null, "fill", lumaOffset(this['rCol'+i]));
                        this['r'+i+'NamePos'] = this['r'+i+'StalkLx'] + ((this['r'+i+'StalkRx']-this['r'+i+'StalkLx'])/2);
                        document.getElementById('r'+i+'Name').setAttributeNS(null, "transform", "matrix(1 0 0 1 "+this['r'+i+'NamePos']+" 31)");
                        }
                    else{document.getElementById('region'+i).setAttributeNS(null, "visibility", "hidden");}
                    }
                                
                if(mrMapAr[prevl] && mrMapAr[prevl][1]>=1){
                    var mPrevIdx = mrMapAr[prevl][1];
                    var mPrevName = getValFromAr(g_markers,mPrevIdx,2,1);
                    var mPrevCol = getValFromAr(g_markers,mPrevIdx,2,4);
                    mPrevCol = "#" + (mPrevCol|0x1000000).toString(16).substr(-6);
                    document.getElementById("marker1").setAttributeNS(null, "visibility", "visible");
                    document.getElementById("marker1Bg").setAttributeNS(null, "fill", mPrevCol);
                    document.getElementById("marker1Number").textContent = mPrevIdx;
                    document.getElementById("marker1Number").setAttributeNS(null, "fill", lumaOffset(mPrevCol));
                    document.getElementById("prevMarkerName").textContent = (!mPrevName) ?("unnamed"):(mPrevName);
                    }
                else{document.getElementById("marker1").setAttributeNS(null, "visibility", "hidden");}
                
                if(mrMapAr[thisl] && mrMapAr[thisl][1]>=1){
                    var mThisIdx = mrMapAr[thisl][1];
                    var mThisName = getValFromAr(g_markers,mThisIdx,2,1);
                    var mThisCol = getValFromAr(g_markers,mThisIdx,2,4);
                    mThisCol = "#" + (mThisCol|0x1000000).toString(16).substr(-6);
                    document.getElementById("marker2").setAttributeNS(null, "visibility", "visible");
                    document.getElementById("marker2Bg").setAttributeNS(null, "fill", mThisCol);
                    // Marker Number (don't care about this)
                    // document.getElementById("marker2Number").textContent = mThisIdx ;
                    // document.getElementById("marker2Number").setAttributeNS(null, "fill", lumaOffset(mThisCol));
                    document.getElementById("atMarkerName").textContent = (!mThisName) ?("unnamed"):(mThisName);
                    }
                else{document.getElementById("marker2").setAttributeNS(null, "visibility", "hidden");}
                
                if(mrMapAr[nextl] && mrMapAr[nextl][1]>=1){
                    var mNextIdx = mrMapAr[nextl][1];
                    var mNextName = getValFromAr(g_markers,mNextIdx,2,1);
                    var mNextCol = getValFromAr(g_markers,mNextIdx,2,4);
                    mNextCol = "#" + (mNextCol|0x1000000).toString(16).substr(-6);
                    document.getElementById("marker3").setAttributeNS(null, "visibility", "visible");
                    document.getElementById("marker3Bg").setAttributeNS(null, "fill", mNextCol);
                    document.getElementById("marker3Number").textContent = mNextIdx ;
                    document.getElementById("marker3Number").setAttributeNS(null, "fill", lumaOffset(mNextCol));
                    document.getElementById("nextMarkerName").textContent = (!mNextName) ?("unnamed"):(mNextName);
                    }
                else{document.getElementById("marker3").setAttributeNS(null, "visibility", "hidden");}
                
                if (prevl>=0){homeIconVis = "hidden"; prevIconVis = "visible";}
                    else {
                        homeIconVis = "visible"; prevIconVis = "hidden";
                        if (pos>0){
                            document.getElementById("marker1").setAttributeNS(null, "visibility", "visible");
                            document.getElementById("prevMarkerName").textContent = "HOME";
                            document.getElementById("marker1Number").textContent = "H";
                            document.getElementById("marker1Bg").setAttributeNS(null, "fill", "#1a1a1a");
                            document.getElementById("marker1Number").setAttributeNS(null, "fill", "#A8A8A8");
                            }
                        else{
                            document.getElementById("marker2").setAttributeNS(null, "visibility", "visible");
                            document.getElementById("atMarkerName").textContent = "HOME";
                            document.getElementById("marker2Number").textContent = "H";
                            document.getElementById("marker2Bg").setAttributeNS(null, "fill", "#1a1a1a");
                            document.getElementById("marker2Number").setAttributeNS(null, "fill", "#A8A8A8");
                            }
                        }
                if (thisl<0 && pos!=0){elAttribute("dropMarker","visibility","visible")}
                else{elAttribute("dropMarker","visibility","hidden")}
                if (nextl>=0){
                    endIconVis = "hidden"; nextIconVis = "visible"; 
                    }
                else { 
                    document.getElementById("marker3").setAttributeNS(null, "visibility", "visible");
                    document.getElementById("nextMarkerName").textContent = "END";
                    document.getElementById("marker3Number").textContent = "E";
                    document.getElementById("marker3Bg").setAttributeNS(null, "fill", "#1a1a1a");
                    document.getElementById("marker3Number").setAttributeNS(null, "fill", "#A8A8A8");
                    endIconVis = "visible"; nextIconVis = "hidden"; 
                    }
                elAttribute("iconPrev","visibility",prevIconVis);
                elAttribute("iconHome","visibility",homeIconVis);
                elAttribute("iconNext","visibility",nextIconVis);
                elAttribute("iconEnd","visibility",endIconVis);
                
                newPos = pos;
                newMrMapLength = mrMapAr.length;
                }
        break;
    
        case "NTRACK":
            if (tok.length > 1) {nTrack = tok[1];}
        break;
                        
    case "SEND":       
        function sendConect(content, thumb){
            content.addEventListener("mousemove", sendMouseMoveHandler, false);
            content.addEventListener("touchmove", sendMouseMoveHandler, false);
            content.addEventListener("mouseleave", mouseLeaveHandler, false);
            content.addEventListener("mouseup", sendMouseUpHandler, false);
            content.addEventListener("touchend", sendMouseUpHandler, false);
            thumb.addEventListener("mousedown", function (event) {mouseDownHandler(event, event.srcElement)}, false);
            thumb.addEventListener('touchstart', function(event){
                if (event.touches.length > 0) mouseDownHandler(event, event.srcElement);
                event.preventDefault(); }, false);
            }
    
        if (tok.length > 3) {
            var targetName; 
                if(tok[6]>0) targetName = trackNamesAr[tok[6]];
                else targetName = "Hardware";
            var sendMuted = ", not muted";
            if(tok[3]&8) sendMuted = ", MUTED";
            
            var trackSendsContent = document.getElementById("sendsTrack" + tok[1]);
            if(trackSendsContent.childNodes.length>0){
                var thisSendDiv = trackSendsContent.childNodes[tok[2]];
                if(thisSendDiv!=null){
                    thisSendDiv.id=[tok[2]];
                    sendTitleText = thisSendDiv.firstChild.getElementsByClassName("sendTitleText")[0];
                    if(sendTitleText.textContent!=targetName)sendTitleText.textContent = targetName;
                    sDbText = thisSendDiv.firstChild.getElementsByClassName("sDbText")[0];
                    sDbValue = mkvolstr(tok[4])
                    if(sDbText.Content!=sDbValue)sDbText.textContent = sDbValue;
                    
                    var sendLine = thisSendDiv.firstChild.getElementsByClassName("sendLine")[0];
                    sLineSetting = (Math.pow(tok[4], 1/4) * 154) + 27;
                    if(mouseDown != 1){sendLine.setAttributeNS(null, "x2", sLineSetting);}

                    var sendThumb = thisSendDiv.firstChild.getElementsByClassName("sendThumb")[0];
                    if(tok[6]>0){
                        var sendTargetBg = document.getElementsByClassName("trackrow1bg")[(tok[6]-1)]
                        if(sendTargetBg!=undefined){var sendTargetBgColour = (sendTargetBg.getAttribute("style"))}
                        var sendThumbColour = sendThumb.getAttribute("style")
                        var defaultColour = "fill: rgb(157, 165, 165);";
                        if(sendTargetBgColour!=defaultColour){
                            if(sendThumbColour!=sendTargetBgColour){
                                sendThumb.setAttributeNS(null, "style", sendTargetBgColour);
                                sendTitleText.setAttributeNS(null, "style", sendTargetBgColour);
                                sendThumb.setAttributeNS(null, "opacity", "0.5");
                                }
                            }
                            else{
                                sendThumb.setAttributeNS(null, "style", "none");
                                sendTitleText.setAttributeNS(null, "style", "none");
                                sendThumb.setAttributeNS(null, "opacity", "0.5");
                                }
                        }
                    
                    sThumbSetting = (Math.pow(tok[4], 1/4) * 154) + 27;
                    if(mouseDown != 1){sendThumb.setAttributeNS(null, "cx", sThumbSetting);}
                    
                    var sendMuteButton = thisSendDiv.firstChild.getElementsByClassName("send_mute")[0];
                    sendMuteButton.onmousedown = mouseDownEventHandler("SET/TRACK/" + tok[1] + "/SEND/" + tok[2] + "/MUTE/-1");
                    var sendMuteOff = thisSendDiv.firstChild.getElementsByClassName("send_mute_off")[0];
                    var sendMuteOn = thisSendDiv.firstChild.getElementsByClassName("send_mute_on")[0];
                    if(tok[3]&8){
                        sendMuteOff.style.visibility = "hidden";
                        sendMuteOn.style.visibility = "visible";
                        }
                    else{
                        sendMuteOff.style.visibility = "visible";
                        sendMuteOn.style.visibility = "hidden";
                        }
                    }
                }
            }            
    }
  }
    if(trackSendHwCntAr.length>0){
        for(x=0;x<trackSendHwCntAr.length;x++){
            if(trackSendHwCntAr[x]>0){
                for(y=0;y<trackSendHwCntAr[x];y++){
                wwr_req("GET/TRACK/" + x + "/SEND/" + y);
                    }
                }
            }
        }    
} 
    
function on_record_button(e) {
  if (recarmCount > 0 || confirm("no tracks are armed, start record?")) wwr_req(1013);
  return false;
}     

function prompt_abort() {
  if (!(last_transport_state&4)) {
    wwr_req(1016);
  } else {
    if (confirm("abort recording? contents will be lost!")) wwr_req(40668);
  }
} 
    
function prompt_seek() {
  if (!(last_transport_state&4)) {
    var seekto = prompt("Seek to position:",last_time_str);
    if (seekto != null) {
      wwr_req("SET/POS_STR/" + encodeURIComponent(seekto));
    }
  }
}    
    
var scaleFactor = 1, optionsOpen =0;
        
function calculateScale(event) {
    var a = document.getElementById("transport_r2");
    if(a){var drawnWidth = a.clientWidth;}
    else{drawnWidth = 303.6}
    scaleFactor = drawnWidth/303.6;
    
    if(optionsOpen==1){
            for (var i=0; i<hereCss.cssRules.length; i++){
                if(hereCss.cssRules[i].selectorText==".optionsBar"){
                    hereCss.deleteRule(i);
                    hereCss.insertRule(".optionsBar {height:"+(scaleFactor*50)+"px;}",i);
                    }
            }
        }
    
    document.getElementById("options").onclick = function(){
        if(optionsOpen!=1){
            for (var i=0; i<hereCss.cssRules.length; i++){
                if(hereCss.cssRules[i].selectorText==".optionsBar"){
                    hereCss.deleteRule(i);
                    hereCss.insertRule(".optionsBar {height:"+(scaleFactor*50)+"px;}",i);
                    }
                }
            optionsOpen=1;
            }
        else{
            for (var i=0; i<hereCss.cssRules.length; i++){
                if(hereCss.cssRules[i].selectorText==".optionsBar"){
                    hereCss.deleteRule(i);
                    hereCss.insertRule(".optionsBar {height:0px;}",i);
                    }
                }
            optionsOpen=0;
            }
        }    
    }
    
window.addEventListener('resize', calculateScale, false); 

trackHeightsAr[0] = 0;    
function hitbox(id) {
    var thisTrackRow2 = document.getElementsByClassName("trackRow2")[id];
    var thisTrackRow2Svg = thisTrackRow2.firstChild.firstElementChild;
    var easingValue = 0;
    transitionTime = 10;
    
   if(trackHeightsAr[id]==0){
       iteration = 0;
       requestAnimationFrame(resizerDown);
       function resizerDown() { 
            if(iteration<transitionTime){
                easingValue = easeInOutCubic(iteration, 0, 1, transitionTime);
                if(easingValue<=0.1){easingValue=0.01;}
                if(transitions==0){var row2scaleD = 37;}
                else{row2scaleD = easingValue * 37;}
                thisTrackRow2Svg.setAttributeNS(null, "viewBox", "0 1 320 " + row2scaleD);
                if(trackSendHwCntAr[id]>0){
                    if(transitions==0){var sendscaleD = 50;}
                    else{sendscaleD = easingValue * 50;}
                    for(x=0;x<trackSendHwCntAr[id];x++){
                        thisSendSvg = document.getElementById("sendsTrack"+[id]).childNodes[x].firstElementChild.firstElementChild;
                        thisSendSvg.setAttributeNS(null, "viewBox", "0 0 320 " + sendscaleD)
                        }
                    }
                iteration++;
                requestAnimationFrame(resizerDown);}
                }
        }
   else{
       iteration = 0;
       requestAnimationFrame(resizerUp);
       function resizerUp() { 
            if(iteration<transitionTime){
                easingValue = easeInOutCubic(iteration, 1, -1, transitionTime);
                if(transitions==0){var row2scaleU = 0.01;}
                else{row2scaleU = easingValue * 37;}
                thisTrackRow2Svg.setAttributeNS(null, "viewBox", "0 0 320 " + row2scaleU);
                if(trackSendHwCntAr[id]>0){
                    if(transitions==0){var sendscaleU = 0.01;}
                    else{sendscaleU = easingValue * 50;}
                    for(x=0;x<trackSendHwCntAr[id];x++){
                        thisSendSvg = document.getElementById("sendsTrack"+[id]).childNodes[x].firstElementChild.firstElementChild;
                        thisSendSvg.setAttributeNS(null, "viewBox", "0 0 320 " + sendscaleU)
                        }
                    }
                iteration++;
                requestAnimationFrame(resizerUp);}
                }
        }
    trackHeightsAr[id] ^= 1;
    }  
    
function init(){
  if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
    for (let l = 0; l < document.styleSheets.length; l ++) {
      let ss = document.styleSheets[l];
      if (ss.cssRules) for (let i=0; i < ss.cssRules.length; i++){
        let st = ss.cssRules[i].selectorText;
        if (st != undefined && st.startsWith(".button")) ss.removeRule(i--);
        transitions = 0;
        doTransitionButton();
      }
    }
  }
}
</script>



</head>
<body onLoad="init();calculateScale()">
<div id="colWrap">
    
<div id="col1">

    
<div style = "width: 100%; background-color: #1a1a1a;">

    </div>
    <div id="jogger" style="width:100%">    
    </div>
    
<div id="transport" style="display: flex; flex-direction: column;"> 

<!-- REGIONS AND MARKERS VIEW -->
<div class="regions-and-markers-view">

    <svg id="nextPrev" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%"
         height="100%" viewBox="0 0 318.9 87.8" xml:space="preserve">

    <rect id="regionStrip" x="70.4" y="20.2" fill="#2D2D2D" width="177.9" height="15"/>
    <path id="locTriangles" fill="#fff" d="M95.9,87.8l6.6-6.6l6.6,6.6H152.4z M152.4,4l6.6,6.6l6.6-6.6H152.4z"/>

    <style type="text/css">
        .st0{fill:none;stroke:#808080;stroke-miterlimit:10;}
        .st3{font-family:'Open Sans';text-anchor:middle;}
        .st4{font-size:10px;}
    </style>
    <g id="region1" visibility="hidden">
        <line id="r1StalkL" class="st0" x1="45.6" y1="30.7" x2="45.6" y2="73.6"/>
        <line id="r1StalkR" class="st0" x1="102.5" y1="30.7" x2="102.5" y2="73.6"/>
        <rect id="r1Rect" x="45.6" y="20.2" rx="3" ry="3" stroke="#808080" width="56.9" height="15.1"/>
        <text id="r1Name" transform="matrix(1 0 0 1 74.5 31)" class="st3 st4"></text>
    </g>
    <g id="region2" visibility="hidden">
        <line id="r2StalkL" class="st0" x1="45.6" y1="30.7" x2="45.6" y2="73.6"/>
        <line id="r2StalkR" class="st0" x1="102.5" y1="30.7" x2="102.5" y2="73.6"/>
        <rect id="r2Rect" x="45.6" y="20.2" rx="3" ry="3" stroke="#808080" width="56.9" height="15.1"/>
        <text id="r2Name" transform="matrix(1 0 0 1 74.5 31)" class="st3 st4"></text>
    </g>
    <g id="region3" visibility="hidden">
        <line id="r3StalkL" class="st0" x1="45.6" y1="30.7" x2="45.6" y2="73.6"/>
        <line id="r3StalkR" class="st0" x1="102.5" y1="30.7" x2="102.5" y2="73.6"/>
        <rect id="r3Rect" x="45.6" y="20.2" rx="3" ry="3" stroke="#808080" width="56.9" height="15.1"/>
        <text id="r3Name" transform="matrix(1 0 0 1 74.5 31)" class="st3 st4"></text>
    </g>
    <g id="region4" visibility="hidden">
        <line id="r4StalkL" class="st0" x1="45.6" y1="30.7" x2="45.6" y2="73.6"/>
        <line id="r4StalkR" class="st0" x1="102.5" y1="30.7" x2="102.5" y2="73.6"/>
        <rect id="r4Rect" x="45.6" y="20.2" rx="3" ry="3" stroke="#808080" width="56.9" height="15.1"/>
        <text id="r4Name" transform="matrix(1 0 0 1 74.5 31)" class="st3 st4"></text>
    </g>
    
    
    <g id="marker1" visibility="hidden">
        <line id="markerStalk" fill="none" stroke="#808080" stroke-miterlimit="10" x1="102.5" y1="59.7" x2="102.5" y2="73.6"/>
        <rect id="marker1Bg" x="95" y="50.4" rx="3" ry="3" stroke="#808080" stroke-miterlimit="10" width="15" height="15"/>    
        <text id="marker1Number" transform="matrix(1 0 0 1 102.5 61.5)" fill="#A8A8A8" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
        <g><defs>
                <rect id="npClip1" x="74.1" y="35.8" width="56.8" height="14.6"/>
            </defs>
            <clipPath id="npClip2">
                <use xlink:href="#npClip1"  overflow="visible"/>
            </clipPath>
            <g clip-path="url(#npClip2)">
                <text id="prevMarkerName" transform="matrix(1 0 0 1 102.5 46.6)" fill="#fff" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
            </g>
        </g>
    </g>
    <g id="marker2" visibility="hidden">
        <line id="markerStalk_1_" fill="none" stroke="#808080" stroke-miterlimit="10" x1="159.3" y1="59.7" x2="159.3" y2="73.6"/>
       <rect id="marker2Bg" x="151.8" y="50.4" rx="3" ry="3" stroke="#808080" stroke-miterlimit="10" width="15" height="15"/>     
            <text id="marker2Number" transform="matrix(1 0 0 1 159.5 61.5)" fill="#A8A8A8" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
        <g><defs>
                <rect id="npClip3" x="130.9" y="35.8" width="56.8" height="14.6"/>
            </defs>
            <clipPath id="npClip4">
                <use xlink:href="#npClip3"  overflow="visible"/>
            </clipPath>
            <g clip-path="url(#npClip4)">
                <text id="atMarkerName" transform="matrix(1 0 0 1 159.5 46.6)" fill="#A8A8A8" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
            </g>
        </g>
    </g>
    <g id="marker3" visibility="hidden">
        <line id="markerStalk_2_" fill="none" stroke="#808080" stroke-miterlimit="10" x1="216.1" y1="59.7" x2="216.1" y2="73.6"/>
        <rect id="marker3Bg" x="208.6" y="50.4" rx="3" ry="3" stroke="#808080" stroke-miterlimit="10" width="15" height="15"/>
            <text id="marker3Number" transform="matrix(1 0 0 1 216 61.5)" fill="#A8A8A8" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
        <g><defs>
                <rect id="npClip5" x="187.7" y="35.8" width="56.8" height="14.6"/>
            </defs>
            <clipPath id="npClip6">
                <use xlink:href="#npClip5"  overflow="visible"/>
            </clipPath>
            <g clip-path="url(#npClip6)">
                <text id="nextMarkerName" transform="matrix(1 0 0 1 216 46.6)" fill="#FFF" font-family="'Open Sans'" text-anchor="middle" font-size="10px"></text>
            </g>
        </g>
    </g>



    </svg>

</div>


<!-- TRANSPORT COUNTER -->
<svg version="1.1" class="transportCounter" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
width="40%" height="100%" viewBox="0 0 320 47.2" xml:space="preserve">
<text id="status" text-anchor="left"; transform="matrix(1 0 0 1 155.1 27.4)" font-family="'Open Sans'" font-size="26px"></text>
<text id="timeUnits" text-anchor="left"; transform="matrix(1 0 0 1 155.1 39.4)" fill="#545454" font-family="'Open Sans'" font-size="9px">Hours:Minutes:Seconds:Frames</text>
</svg>

 
<!-- TRANSPORT BUTTONS -->
<div id="transport_r2">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%"
 height="100%" viewBox="0 0 303.6 107.6" xml:space="preserve">
  
    <g id="play" >
        <g id=playButtonOn visibility="hidden">
        </g>
        <g id=playButtonOff visibility="visible">
        </g>
    </g>

    <g id="pause">
        <g id="pauseButtonOn" visibility="hidden">
        </g>
        <g id="pauseButtonOff" visibility="hidden">
        </g>
    </g>
</svg>
    </div> 

    
    <div id="transport_r3" style="display:flex; margin: 1.5%;">

        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="33%" height="100%" viewBox="0 0 101.5 108" xml:space="preserve">
            <g onClick="wwr_req(1068)">
              <g id="repeat_on"  visibility="hidden">

              </g>
              <g id="repeat_off" visibility="hidden">

                </g>
              </g>
            </g>
          </svg>

            <g id="armed" class="button">
              <text id="armed_count"></text> 
              <path id="armed_text"></path>
            </g>
            <g id="abort" class="button" style="visibility:hidden" onClick="prompt_abort()">
              <path id="abort_text" fill="#FF2200" d="M113.5,57.4l-4.1,0.9l-0.7-3.1l11.4-2.6l0.8,3.7c0.7,3.1-0.1,4.9-2.3,5.4 c-1.3,0.3-2.5-0.1-3.5-1.2l-4.2,4.4l-0.8-3.5l3.6-3.4L113.5,57.4z M115.9,56.9l0.1,0.6c0.2,1.1,0.8,1.5,1.8,1.3 c0.8-0.2,1.1-0.8,0.8-1.8l-0.1-0.6L115.9,56.9z M116.6,75.3l-3.5-6l10-6l3.5,6l-2.2,1.3l-1.9-3.2l-1.6,0.9l1.8,3l-2.2,1.3l-1.8-3 l-1.9,1.1l1.9,3.2L116.6,75.3z M130.1,76.2c-0.6-0.5-1.2-0.7-1.9-0.5c-0.7,0.2-1.4,0.7-2.2,1.5c-1.5,1.7-1.6,3.1-0.3,4.2 c0.4,0.3,0.8,0.6,1.3,0.8c0.5,0.2,0.9,0.4,1.4,0.6l-1.8,2c-1-0.3-2-0.9-2.9-1.7c-1.3-1.2-2-2.5-2-3.8c0-1.4,0.6-2.8,1.9-4.2 c0.8-0.9,1.7-1.5,2.6-1.9c0.9-0.4,1.9-0.5,2.9-0.3c1,0.2,1.9,0.7,2.7,1.5c0.9,0.8,1.7,1.8,2.2,3l-2.4,1.2c-0.2-0.4-0.4-0.9-0.6-1.2 C130.8,76.9,130.5,76.5,130.1,76.2z M143.9,87c-0.7,1.8-1.7,3.1-3,3.7c-1.3,0.6-2.8,0.6-4.5-0.1c-1.7-0.7-2.8-1.6-3.4-2.9	c-0.5-1.3-0.5-2.9,0.2-4.7c0.7-1.8,1.7-3,3-3.6c1.3-0.6,2.8-0.6,4.5,0.1c1.7,0.7,2.9,1.6,3.4,2.9C144.7,83.6,144.6,85.2,143.9,87z M136.4,84.1c-0.8,2.1-0.5,3.4,1,4c0.7,0.3,1.4,0.2,2-0.1c0.6-0.4,1-1.1,1.5-2.2c0.4-1.1,0.5-2,0.4-2.6c-0.2-0.7-0.6-1.1-1.3-1.4 C138.3,81.2,137.2,82,136.4,84.1z M151.1,89.1l0.1,4.2l-3.2,0.1l-0.2-11.7l3.8-0.1c3.2-0.1,4.8,1.1,4.8,3.4c0,1.4-0.6,2.4-1.9,3.2	l3.5,5l-3.6,0.1l-2.5-4.2L151.1,89.1z M151.1,86.7l0.6,0c1.1,0,1.6-0.5,1.6-1.5c0-0.8-0.6-1.2-1.6-1.2l-0.6,0L151.1,86.7z M170,83.1c0.7,1.8,0.7,3.4,0.1,4.8c-0.6,1.4-1.9,2.4-3.7,3.1l-3.5,1.3l-4.1-10.9l3.8-1.4c1.8-0.7,3.3-0.7,4.6-0.2	C168.4,80.3,169.4,81.4,170,83.1z M167,84.3c-0.4-1-0.9-1.7-1.4-2c-0.6-0.3-1.3-0.4-2.1,0l-0.9,0.3l2.3,6.1l0.7-0.2	c0.9-0.3,1.5-0.8,1.7-1.5C167.5,86.3,167.4,85.4,167,84.3z M176.7,85.7l-7-9.4l2.5-1.9l7,9.4L176.7,85.7z M190.5,71l-2.4,3.3 l-9.2-1.4l0,0.1c1.1,0.7,1.9,1.2,2.5,1.6l4.3,3.1l-1.6,2.3l-9.4-6.9l2.4-3.3l9.1,1.3l0,0c-1-0.6-1.8-1.2-2.4-1.6l-4.3-3.1l1.7-2.3	L190.5,71z M187.6,58.6l1.2-4.9l6.1,1.5c0.1,1.4,0,3-0.4,4.6c-0.4,1.7-1.3,3-2.5,3.7c-1.2,0.7-2.8,0.8-4.7,0.4	c-1.8-0.4-3.1-1.3-3.9-2.6c-0.8-1.3-0.9-2.9-0.5-4.8c0.2-0.7,0.4-1.4,0.7-2c0.3-0.6,0.6-1.1,0.9-1.5l2.2,1.6 c-0.6,0.7-1,1.6-1.3,2.5c-0.2,0.9-0.1,1.7,0.4,2.3c0.5,0.6,1.2,1.1,2.3,1.3c1.1,0.3,1.9,0.2,2.6-0.1c0.7-0.3,1.1-0.9,1.3-1.7 c0.1-0.5,0.2-0.9,0.2-1.3l-1.8-0.4l-0.5,2L187.6,58.6z M132.4,23.3l-1.9-1.3l-2.9,2.5l1,2l-2.6,2.3l-4.8-11.4l3.2-2.7l10.6,6.4 L132.4,23.3z M128.4,20.5l-1.6-1.1c-0.4-0.2-0.8-0.6-1.4-1c-0.6-0.4-1-0.7-1.2-0.9c0.1,0.2,0.4,0.6,0.7,1.2 c0.3,0.6,0.9,1.7,1.7,3.4L128.4,20.5z M132.6,9.6l3.8-1.4c1.5-0.5,2.7-0.7,3.6-0.5c0.9,0.2,1.5,0.7,1.8,1.7 c0.2,0.6,0.3,1.2,0.1,1.7c-0.2,0.5-0.5,1-0.9,1.3l0,0.1c0.7-0.1,1.3,0.1,1.8,0.4s0.8,0.8,1.1,1.5c0.4,1,0.3,1.9-0.3,2.8 c-0.5,0.8-1.5,1.5-2.7,2l-4.3,1.5L132.6,9.6z M137.1,12.7l0.9-0.3c0.4-0.2,0.7-0.4,0.9-0.6c0.2-0.3,0.2-0.6,0.1-0.9 c-0.2-0.6-0.8-0.8-1.7-0.4l-0.8,0.3L137.1,12.7z M137.9,14.9l0.8,2.3l1-0.4c0.9-0.3,1.2-0.9,1-1.7c-0.1-0.4-0.4-0.6-0.7-0.7 c-0.3-0.1-0.7-0.1-1.2,0.1L137.9,14.9z M158.4,11.5c-0.1,2-0.6,3.4-1.6,4.4c-1,1-2.4,1.5-4.3,1.4c-1.8-0.1-3.2-0.6-4.2-1.7	c-0.9-1.1-1.4-2.6-1.3-4.5c0.1-1.9,0.6-3.4,1.6-4.4c1-1,2.4-1.5,4.3-1.4c1.9,0.1,3.3,0.6,4.2,1.7C158,8,158.4,9.5,158.4,11.5z M150.3,11.3c-0.1,2.3,0.7,3.4,2.3,3.5c0.8,0,1.4-0.2,1.8-0.8c0.4-0.5,0.6-1.4,0.7-2.5c0-1.2-0.1-2-0.5-2.6 c-0.4-0.6-0.9-0.9-1.7-0.9C151.2,7.9,150.4,9,150.3,11.3z M165,15.5l-1.7,3.9l-2.9-1.3l4.7-10.7l3.5,1.5c2.9,1.3,3.9,3,3,5.1 c-0.5,1.2-1.6,1.9-3.1,2.1l1.1,6l-3.3-1.4l-0.6-4.9L165,15.5z M166,13.3l0.5,0.2c1,0.4,1.7,0.2,2.1-0.7c0.3-0.7,0-1.3-1-1.8 l-0.6-0.2L166,13.3z M174.4,26.7l-2.3-2.1l6.1-6.7l-2.1-1.9l1.7-1.9l6.5,6l-1.7,1.9l-2.1-1.9L174.4,26.7z" />
              <polygon id="abort_cross" visibility="hidden" fill="#FF2200" points="171.9,37.8 163.6,29.5 151.7,41.4 139.8,29.5 131.5,37.8 143.4,49.7 131.5,61.6 139.8,69.9 151.7,58 163.6,69.9 171.9,61.6 160,49.7" />
              <circle class="mouseover" visibility="hidden" opacity="0.05" fill="#FFFFFF" cx="151.4" cy="49.7" r="49.7" />
            </g>
            <g id="button-record" visibility="hidden">
              <g id="record_off" visibility="hidden">
                <circle class="shadow" opacity="0.15" cx="50.4" cy="58.3" r="49.7" />
                <path fill="#5D3729" d="M49.7,98.8c-27.1,0-49-21.9-49-49s21.9-49,49-49s49,21.9,49,49S76.9,98.8,49.7,98.8z" />
                <path fill="#1A1A1A" d="M49.7,1.4c26.7,0,48.3,21.7,48.3,48.3S76.5,98.1,49.7,98.1S1.4,76.5,1.4,49.7S23,1.4,49.7,1.4 M49.7,0           C22.3,0,0,22.3,0,49.7s22.3,49.7,49.7,49.7s49.7-22.3,49.7-49.7S77.2,0,49.7,0L49.7,0z" />
                <linearGradient id="rec_off1" gradientUnits="userSpaceOnUse" x1="49.7368" y1="-879.7368" x2="49.7368" y2="-831.4211" gradientTransform="matrix(1 0 0 -1 0 -830)">
                  <stop offset="0" style="stop-color:#FFFFFF;stop-opacity:0.25" />
                  <stop offset="1" style="stop-color:#FFFFFF" />
                </linearGradient>
                <path opacity="0.15" fill="url(#rec_off1)" d="M98.1,49.7H1.4l0,0C1.4,23,23,1.4,49.7,1.4l0,0 C76.6,1.4,98.1,23,98.1,49.7L98.1,49.7z" />
                <circle opacity="0.5" fill="none" stroke="#FFFFFF" stroke-width="11.0527" stroke-miterlimit="10" cx="49.7" cy="49.7" r="23.3" />
                <path class="mouseover" visibility="hidden" opacity="0.1" fill="#FFFFFF" d="M49.7,98.8c-27.1,0-49-21.9-49-49s21.9-49,49-49s49,21.9,49,49 S76.9,98.8,49.7,98.8z" />
              </g>
              <g id="record_on" visibility="hidden">
              </g>
            </g>
          </svg>
        
    </div> 


</div>
</div>

<br>
</div>

<!-- EMBEDDED IFRAME OF OTHER PAGE -->
<div class="iframe-container">
    <iframe class="responsive-iframe" src="http://localhost:8101"></iframe>
</div>



<div id="backLoad" style="display:none">
  
<!-- TRACK ROW 1 -->
 
<element id=trackRow1Svg>       
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%"
	 viewBox="0 1 320 53" xml:space="preserve">
<rect class="trackrow1bg" y="1" width="320" height="54"/>
<path id="divider" fill="#333333" d="M0,0v1v27C0,13.1,12.1,1,27,1h293V0H0z"/>
<g class="recarm">
<g class="recarm-off button" >
	<circle class="shadow" opacity="0.15" cx="27.2" cy="31.8" r="22.3"/>
	<path fill="#5D3729" d="M26.8,50c-12.2,0-22-9.8-22-22s9.8-22,22-22s22,9.8,22,22S39,50,26.8,50z"/>
	<path fill="#1A1A1A" d="M26.8,6.3c12,0,21.7,9.8,21.7,21.7s-9.7,21.7-21.7,21.7S5.1,40,5.1,28S14.8,6.3,26.8,6.3 M26.8,5.7
		C14.5,5.7,4.5,15.7,4.5,28s10,22.3,22.3,22.3s22.3-10,22.3-22.3S39.2,5.7,26.8,5.7L26.8,5.7z"/>
	
		<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="26.8404" y1="-960.0018" x2="26.8404" y2="-938.2996" gradientTransform="matrix(1 0 0 -1 0 -932)">
		<stop  offset="0" style="stop-color:#FFFFFF;stop-opacity:0.25"/>
		<stop  offset="1" style="stop-color:#FFFFFF"/>
	</linearGradient>
	<path opacity="0.15" fill="url(#SVGID_1_)" d="M48.5,28H5.1l0,0c0-12,9.7-21.7,21.7-21.7l0,0
		C38.9,6.3,48.5,16,48.5,28L48.5,28z"/>
	
		<circle opacity="0.5" fill="none" stroke="#FFFFFF" stroke-width="4.9646" stroke-miterlimit="10" cx="26.8" cy="28" r="10.5"/>
		<circle class="mouseover" visibility="hidden" opacity="0.15" fill="#FFFFFF" cx="26.8" cy="28" r="22.3"/>
</g>
<g class="recarm-on button">
	<path fill="#FF2200" d="M26.8,50.2C14.6,50.2,4.7,40.3,4.7,28S14.6,5.8,26.8,5.8S49,15.7,49,28S39.1,50.2,26.8,50.2z"/>
	<path fill="#1A1A1A" d="M26.8,6.1C38.9,6.1,48.7,16,48.7,28s-9.8,21.9-21.9,21.9S5,40.1,5,28S14.8,6.1,26.8,6.1 M26.8,5.5
		C14.4,5.5,4.3,15.6,4.3,28s10.1,22.5,22.5,22.5S49.3,40.4,49.3,28S39.2,5.5,26.8,5.5L26.8,5.5z"/>
	
		<circle opacity="0.5" fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" cx="26.8" cy="28" r="10.5"/>
		<circle class="mouseover" visibility="hidden" opacity="0.15" fill="#FFFFFF" cx="26.8" cy="28" r="22.3"/>
</g>
</g>
<text class="trackNumber" transform="matrix(1 0 0 1 55.3999 48.2002)" fill="#FFFFFF" font-family="'Open Sans'" font-size="17px">88</text>
<rect id="underline" x="56" y="30" opacity="0.1" width="160" height="1"/>
<text class="trackName" transform="matrix(1 0 0 1 57.3999 24.2002)" fill="#1A1A1A" font-family="'Open Sans'" font-size="19px">Track Name</text>
<g class="solo button" >
	<g class="solo-off">
		<path class="shadow" opacity="0.15" d="M314.4,51.2c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8
			v-4.6h42.7V51.2z"/>
			<linearGradient id="soloGrad" gradientUnits="userSpaceOnUse" x1="1720.0585" y1="773.3742" x2="1720.0585" y2="816.6478" gradientTransform="matrix(1 0 0 1 -1427 -767)">
			<stop  offset="0" style="stop-color:#FFFFFF"/>
			<stop  offset="1" style="stop-color:#D9D9D9"/>
		</linearGradient>
		<path fill="url(#soloGrad)" d="M273.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39
			c0,1.2-1,2.1-2.1,2.1H273.6z"/>
		<path fill="#50542A" d="M295.7,31c0-0.5-0.2-1-0.6-1.4s-1.1-0.7-2.1-1c-1.2-0.3-2.2-0.8-2.9-1.3s-1-1.3-1-2.3c0-1,0.4-1.8,1.2-2.4
			s1.7-1,2.9-1c1.3,0,2.3,0.4,3.1,1.1s1.2,1.6,1.1,2.6v0.1h-1.6c0-0.7-0.2-1.3-0.7-1.7c-0.5-0.4-1.1-0.7-1.9-0.7s-1.3,0.2-1.8,0.5
			c-0.4,0.4-0.6,0.9-0.6,1.5c0,0.5,0.2,1,0.7,1.3c0.4,0.4,1.2,0.7,2.2,0.9c1.2,0.3,2.2,0.8,2.8,1.4c0.7,0.6,1,1.4,1,2.3
			c0,1-0.4,1.8-1.2,2.4c-0.8,0.6-1.8,0.9-3,0.9c-1.2,0-2.3-0.3-3.2-1c-0.9-0.7-1.3-1.5-1.3-2.7v-0.1h1.6c0,0.8,0.3,1.3,0.9,1.8
			c0.6,0.4,1.2,0.6,2,0.6s1.4-0.2,1.9-0.5C295.6,32.1,295.7,31.6,295.7,31z"/>
		<path class="mouseover" visibility="hidden" opacity="0.5" fill="#FFFFFF" d="M273.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39
			c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H273.6z"/>
	</g>
	<g class="solo-on">
		<path fill="#F1C524" d="M273.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1
			H273.6z"/>
		<path fill="#FFFFFF" d="M295.7,31c0-0.5-0.2-1-0.6-1.4s-1.1-0.7-2.1-1c-1.2-0.3-2.2-0.8-2.9-1.3s-1-1.3-1-2.3c0-1,0.4-1.8,1.2-2.4
			s1.7-1,2.9-1c1.3,0,2.3,0.4,3.1,1.1s1.2,1.6,1.1,2.6v0.1h-1.6c0-0.7-0.2-1.3-0.7-1.7c-0.5-0.4-1.1-0.7-1.9-0.7s-1.3,0.2-1.8,0.5
			c-0.4,0.4-0.6,0.9-0.6,1.5c0,0.5,0.2,1,0.7,1.3c0.4,0.4,1.2,0.7,2.2,0.9c1.2,0.3,2.2,0.8,2.8,1.4c0.7,0.6,1,1.4,1,2.3
			c0,1-0.4,1.8-1.2,2.4c-0.8,0.6-1.8,0.9-3,0.9c-1.2,0-2.3-0.3-3.2-1c-0.9-0.7-1.3-1.5-1.3-2.7v-0.1h1.6c0,0.8,0.3,1.3,0.9,1.8
			c0.6,0.4,1.2,0.6,2,0.6s1.4-0.2,1.9-0.5C295.6,32.1,295.7,31.6,295.7,31z"/>
		<path class="mouseover" visibility="hidden" opacity="0.2" fill="#FFFFFF" d="M273.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39
			c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H273.6z"/>
	</g>
	<path id="border" fill="#1A1A1A" d="M312.6,6.7c1,0,1.8,0.8,1.8,1.8v39c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8v-39
		c0-1,0.8-1.8,1.8-1.8H312.6 M312.6,6.1h-39c-1.3,0-2.4,1.1-2.4,2.4v39c0,1.3,1.1,2.4,2.4,2.4h39c1.3,0,2.4-1.1,2.4-2.4v-39
		C315,7.2,313.9,6.1,312.6,6.1L312.6,6.1z"/>
</g>
<g class="mute button">
	<g class="mute-off">
		<path class="shadow" opacity="0.15" d="M265.4,51.2c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8
			v-4.6h42.7V51.2z"/>
		
			<linearGradient id="muteOffGrad" gradientUnits="userSpaceOnUse" x1="1671.0585" y1="184.6258" x2="1671.0585" y2="141.3522" gradientTransform="matrix(1 0 0 -1 -1427 191)">
			<stop  offset="0" style="stop-color:#FFFFFF"/>
			<stop  offset="1" style="stop-color:#D9D9D9"/>
		</linearGradient>
		<path fill="url(#muteOffGrad)" d="M224.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39
			c0,1.2-1,2.1-2.1,2.1H224.6z"/>
			<path fill="#54362A" d="M244.1,31.9L244.1,31.9l4.2-10h2.2v12.3h-1.8V25h-0.1l-3.9,9.1h-1.2l-4-9.5h-0.1v9.5h-1.8V21.9h2.3
				L244.1,31.9z"/>
		<path fill="#1A1A1A" d="M263.6,6.7c1,0,1.8,0.8,1.8,1.8v39c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8v-39
		c0-1,0.8-1.8,1.8-1.8H263.6 M263.6,6.1h-39c-1.3,0-2.4,1.1-2.4,2.4v39c0,1.3,1.1,2.4,2.4,2.4h39c1.3,0,2.4-1.1,2.4-2.4v-39
		C266,7.2,264.9,6.1,263.6,6.1L263.6,6.1z"/>
		<path class="mouseover" visibility="hidden" opacity="0.5" fill="#FFFFFF" d="M224.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39
			c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H224.6z"/>
	</g>
	<g class="mute-on">
		<path fill="#F13F24" d="M224.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1
			H224.6z"/>
			<path fill="#FFFFFF" d="M244.1,31.9L244.1,31.9l4.2-10h2.2v12.3h-1.8V25h-0.1l-3.9,9.1h-1.2l-4-9.5h-0.1v9.5h-1.8V21.9h2.3
				L244.1,31.9z"/>
		<path fill="#1A1A1A" d="M263.6,6.7c1,0,1.8,0.8,1.8,1.8v39c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8v-39
		c0-1,0.8-1.8,1.8-1.8H263.6 M263.6,6.1h-39c-1.3,0-2.4,1.1-2.4,2.4v39c0,1.3,1.1,2.4,2.4,2.4h39c1.3,0,2.4-1.1,2.4-2.4v-39
		C266,7.2,264.9,6.1,263.6,6.1L263.6,6.1z"/>
		<path class="mouseover" opacity="0.15" fill="#FFFFFF" d="M224.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39
			c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H224.6z"/>
	</g>
	
</g>
<g class="monitor button">
	<g class="monitor-auto">
		<path fill="#5F6666" d="M263.1,6h-38c-1.7,0-3,1.3-3,3v38c0,1.7,1.3,3,3,3h38c1.7,0,3-1.3,3-3V9C266.1,7.3,264.8,6,263.1,6z"/>
		<path fill="#ADB3B3" d="M250.7,29.5h-5.7l-3.2-3.2c-0.7-1.5-1.5-2.4-2.4-2.4c-2.1,0-3.8,4.6-3.8,10.3s1.7,10.3,3.8,10.3
			c0.9,0,1.8-0.9,2.4-2.4l3.2-3.2h5.7c1,0,1.9-2.1,1.9-4.7C252.6,31.6,251.8,29.5,250.7,29.5z M239.5,42.5c-0.7-0.7-1.9-3.5-1.9-8.3
			s1.2-7.7,1.9-8.3c0.7,0.7,1.9,3.5,1.9,8.3S240.1,41.8,239.5,42.5z"/>
		<path fill="#ADB3B3" d="M234.7,18.2h-2.1l-0.5,1.8h-1.7l2.4-8.4h1.7l2.4,8.3h-1.7L234.7,18.2z M233,16.9h1.4l-0.7-2.7h-0.1
			L233,16.9z M243.9,11.6v5.5c0,1-0.2,1.7-0.8,2.3c-0.5,0.5-1.3,0.8-2.1,0.8c-0.9,0-1.6-0.2-2.1-0.8c-0.5-0.5-0.8-1.3-0.8-2.3v-5.5
			h1.6v5.5c0,0.5,0.1,1,0.4,1.3c0.2,0.3,0.5,0.4,1,0.4c0.4,0,0.7-0.1,1-0.4c0.2-0.3,0.4-0.7,0.4-1.3v-5.5L243.9,11.6L243.9,11.6z
			 M250.7,12.9h-1.9V20h-1.6v-7.1h-1.9v-1.3h5.5L250.7,12.9C250.8,12.9,250.7,12.9,250.7,12.9z M257.9,17c0,1-0.4,1.7-0.9,2.3
			c-0.5,0.5-1.3,0.9-2.2,0.9c-0.9,0-1.6-0.3-2.2-0.9c-0.5-0.5-0.9-1.3-0.9-2.3v-2.3c0-1,0.3-1.8,0.9-2.3s1.3-0.9,2.2-0.9
			c0.9,0,1.6,0.3,2.3,0.9c0.5,0.5,0.9,1.3,0.9,2.3L257.9,17L257.9,17z M256.3,14.6c0-0.6-0.1-1.1-0.4-1.4s-0.6-0.5-1.1-0.5
			s-0.9,0.2-1,0.5s-0.4,0.8-0.4,1.4V17c0,0.6,0.1,1.1,0.4,1.4s0.6,0.5,1.1,0.5s0.9-0.2,1.1-0.5c0.2-0.3,0.4-0.8,0.4-1.4L256.3,14.6
			L256.3,14.6z"/>
	</g>
	<g class="monitor-on">
		<path fill="#5F6666" d="M263.1,6h-38c-1.7,0-3,1.3-3,3v38c0,1.7,1.3,3,3,3h38c1.7,0,3-1.3,3-3V9C266.1,7.3,264.8,6,263.1,6z"/>
		<path fill="#ADB3B3" d="M250.7,23.2h-5.7l-3.2-3.2c-0.7-1.5-1.5-2.4-2.4-2.4c-2.1,0-3.8,4.6-3.8,10.3s1.7,10.3,3.8,10.3
			c0.9,0,1.8-0.9,2.4-2.4l3.2-3.2h5.7c1,0,1.9-2.1,1.9-4.7C252.6,25.3,251.8,23.2,250.7,23.2z M239.5,36.2c-0.7-0.7-1.9-3.5-1.9-8.3
			s1.2-7.7,1.9-8.3c0.7,0.7,1.9,3.5,1.9,8.3S240.1,35.6,239.5,36.2z"/>
	</g>
	<g class="monitor-off">
		<path fill="#9DA5A5" d="M225.1,49.5c-1.4,0-2.5-1.1-2.5-2.5V9c0-1.4,1.1-2.5,2.5-2.5h38c1.4,0,2.5,1.1,2.5,2.5v38
			c0,1.4-1.1,2.5-2.5,2.5H225.1z"/>
		<path fill="#5F6666" d="M263.1,7c1.1,0,2,0.9,2,2v38c0,1.1-0.9,2-2,2h-38c-1.1,0-2-0.9-2-2V9c0-1.1,0.9-2,2-2H263.1 M263.1,6h-38
			c-1.7,0-3,1.3-3,3v38c0,1.7,1.3,3,3,3h38c1.7,0,3-1.3,3-3V9C266.1,7.3,264.8,6,263.1,6L263.1,6z"/>
		<path fill="#5F6666" d="M250.7,23.2h-5.7l-3.2-3.2c-0.7-1.5-1.5-2.4-2.4-2.4c-0.8,0-1.6,0.7-2.2,1.9h2.2c0.2,0.2,0.4,0.5,0.7,1.2
			l0.1,0.3l0.2,0.2l3.2,3.2l0.5,0.5h0.7h5.2c0.2,0.4,0.5,1.4,0.5,2.9c0,1.5-0.3,2.4-0.5,2.9h-5.2h-0.7l-0.5,0.5l-3.2,3.2l-0.2,0.2
			l-0.1,0.3c-0.3,0.7-0.5,1-0.7,1.2l0,0h-2.2c0.6,1.2,1.3,1.9,2.2,1.9c0.9,0,1.8-0.9,2.4-2.4l3.2-3.2h5.7c1,0,1.9-2.1,1.9-4.7
			C252.6,25.3,251.8,23.2,250.7,23.2z"/>
	</g>
	<path class="mouseover" visibility="hidden" opacity="0.2" fill="#FFFFFF" d="M224.6,49.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39
			c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H224.6z"/>
</g>
<polygon class="folder_icon" fill="#616666" points="88,39 85.3,36 80,36 80,39 80,48 94,48 94,39 "/>
<g id="clip_indicator">
	<g id="clip_off">
		<path opacity="0.1" d="M158,48.6h18.9c3.7,0,6.6-3,6.6-6.6v-0.4c0-3.7-3-6.6-6.6-6.6H158c-3.7,0-6.6,3-6.6,6.6V42
			C151.4,45.7,154.3,48.6,158,48.6z"/>
		<path fill="#9DA5A5" d="M156.1,41.7c0-2.4,1.8-4,4-4c1.4,0,2.4,0.7,3,1.5l-0.8,0.5c-0.4-0.7-1.3-1.1-2.2-1.1c-1.7,0-3,1.3-3,3.2
			c0,1.8,1.3,3.2,3,3.2c0.9,0,1.7-0.5,2.2-1.1l0.8,0.5c-0.7,0.9-1.6,1.5-3,1.5C157.8,45.8,156.1,44.1,156.1,41.7z M164.3,37.8h1v6.9
			h3.6v0.9h-4.6V37.8z M170.3,37.8h1v7.8h-1V37.8z M173.1,37.8h3.1c1.6,0,2.4,1.1,2.4,2.3c0,1.3-0.9,2.3-2.4,2.3H174v3.1h-1V37.8z
			 M176.1,38.7h-2v3h2c0.9,0,1.6-0.6,1.6-1.5S177,38.7,176.1,38.7z"/>
	</g>
	<g class="clip_on" visibility="hidden">
		<path fill="#922525" d="M158,48.6h18.9c3.7,0,6.6-3,6.6-6.6v-0.4c0-3.7-3-6.6-6.6-6.6H158c-3.7,0-6.6,3-6.6,6.6V42
			C151.4,45.7,154.3,48.6,158,48.6z"/>
		<path fill="#FFBFBF" d="M156.1,41.7c0-2.4,1.8-4,4-4c1.4,0,2.4,0.7,3,1.5l-0.8,0.5c-0.4-0.7-1.3-1.1-2.2-1.1c-1.7,0-3,1.3-3,3.2
			c0,1.8,1.3,3.2,3,3.2c0.9,0,1.7-0.5,2.2-1.1l0.8,0.5c-0.7,0.9-1.6,1.5-3,1.5C157.8,45.8,156.1,44.1,156.1,41.7z M164.3,37.8h1v6.9
			h3.6v0.9h-4.6V37.8z M170.3,37.8h1v7.8h-1V37.8z M173.1,37.8h3.1c1.6,0,2.4,1.1,2.4,2.3s-0.9,2.3-2.4,2.3H174v3.1h-1V37.8z
			 M176.1,38.7h-2v3h2c0.9,0,1.6-0.6,1.6-1.5S177,38.7,176.1,38.7z"/>
	</g>
</g>
<g id="r_indicator">
	<g id="r_off">
		<circle opacity="0.1" cx="192" cy="41.8" r="6.8"/>
		<path fill="#9DA5A5" d="M192,42.7h-1.6v3.2h-1v-8h3.2c1.5,0,2.5,0.9,2.5,2.4c0,1.4-1,2.2-2.1,2.3l2.2,3.3H194L192,42.7z
			 M192.5,38.8h-2.1v3.1h2.1c0.9,0,1.6-0.6,1.6-1.5S193.5,38.8,192.5,38.8z"/>
	</g>
	<g class="r_on" visibility="hidden">
		<circle fill="#7C8040" cx="192" cy="41.8" r="6.8"/>
		<path fill="#EEFF00" d="M192,42.7h-1.6v3.2h-1v-8h3.2c1.5,0,2.5,0.9,2.5,2.4c0,1.4-1,2.2-2.1,2.3l2.2,3.3H194L192,42.7z
			 M192.5,38.8h-2.1v3.1h2.1c0.9,0,1.6-0.6,1.6-1.5S193.5,38.8,192.5,38.8z"/>
	</g>
</g>

	<g id="s_off">
		<circle opacity="0.1" cx="207.2" cy="41.8" r="6.8"/>
		<path fill="#9DA5A5" d="M204.9,44c0.5,0.6,1.4,1.1,2.5,1.1c1.4,0,1.9-0.8,1.9-1.4c0-1-1-1.2-2-1.5c-1.3-0.3-2.7-0.7-2.7-2.3
			c0-1.3,1.2-2.2,2.7-2.2c1.2,0,2.2,0.4,2.8,1.1l-0.6,0.7c-0.6-0.7-1.4-1-2.3-1c-1,0-1.6,0.5-1.6,1.3c0,0.8,0.9,1,1.9,1.3
			c1.3,0.3,2.8,0.8,2.8,2.4c0,1.2-0.8,2.4-3,2.4c-1.4,0-2.4-0.5-3.1-1.3L204.9,44z"/>
	</g>
	<g class="s_on" visibility="hidden">
		<circle fill="#437480" cx="207.2" cy="41.8" r="6.8"/>
		<path fill="#00D0FF" d="M204.9,44c0.5,0.6,1.4,1.1,2.5,1.1c1.4,0,1.9-0.8,1.9-1.4c0-1-1-1.2-2-1.5c-1.3-0.3-2.7-0.7-2.7-2.3
			c0-1.3,1.2-2.2,2.7-2.2c1.2,0,2.2,0.4,2.8,1.1l-0.6,0.7c-0.6-0.7-1.4-1-2.3-1c-1,0-1.6,0.5-1.6,1.3c0,0.8,0.9,1,1.9,1.3
			c1.3,0.3,2.8,0.8,2.8,2.4c0,1.2-0.8,2.4-3,2.4c-1.4,0-2.4-0.5-3.1-1.3L204.9,44z"/>
	</g>
    <text class="meterReadout" text-anchor="end" transform="matrix(1 0 0 1 147 46)" fill="#FFFFFF" opacity="0.75" font-family="'Open Sans'" font-size="11px">dB</text>
    <rect class="hitbox" x="49" y="1" opacity="0" width="173" height="53.9" onClick="hitbox(event.target.id)"/> 
</svg></element>  

  <!-- TRACK ROW 2 -->  
  
<element id=trackRow2Svg>  
<svg version="1.1" class="faderSvg" display="block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 1 320 0.0001" xml:space="preserve">
<rect x="0" fill="#333333" width="320" height="36"/>
<rect id="fader_track" x="23" y="16.7" transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 320 37.3333)" opacity="0.5" fill="#1A1A1A" width="274" height="4"/>
<g class="fader">
	<g>
			<linearGradient id="fGrad1" gradientUnits="userSpaceOnUse" x1="245.0833" y1="-114.0833" x2="245.0833" y2="-106.0833" gradientTransform="matrix(6.123234e-17 -1 -1 -6.123234e-17 -68.0833 263.0833)">
			<stop  offset="0" style="stop-color:#212121"/>
			<stop  offset="1" style="stop-color:#949494"/>
		</linearGradient>
		<rect x="38" y="0.5" fill="url(#fGrad1)" width="8" height="35"/>
		
			<linearGradient id="fGrad2" gradientUnits="userSpaceOnUse" x1="245.0833" y1="-106.0833" x2="245.0833" y2="-92.0833" gradientTransform="matrix(6.123234e-17 -1 -1 -6.123234e-17 -68.0833 263.0833)">
			<stop  offset="0" style="stop-color:#FFFFFF"/>
			<stop  offset="0.9991" style="stop-color:#7A7A7A"/>
		</linearGradient>
		<path fill="url(#fGrad2)" d="M26,0.5h12v35H26c-1.1,0-2-0.9-2-2v-31C24,1.4,24.9,0.5,26,0.5z"/>
		
			<linearGradient id="fGrad3" gradientUnits="userSpaceOnUse" x1="245.0833" y1="-91.0833" x2="245.0833" y2="-77.0833" gradientTransform="matrix(6.123234e-17 -1 -1 -6.123234e-17 -68.0833 263.0833)">

			<stop  offset="0" style="stop-color:#9C9C9C"/>
			<stop  offset="1" style="stop-color:#4D4D4D"/>
		</linearGradient>
		<path fill="url(#fGrad3)" d="M21,35.5c1.1,0,2-0.9,2-2v-31c0-1.1-0.9-2-2-2H9v35H21z"/>
		
			<linearGradient id="fGrad4" gradientUnits="userSpaceOnUse" x1="245.0833" y1="-77.0833" x2="245.0833" y2="-69.0833" gradientTransform="matrix(6.123234e-17 -1 -1 -6.123234e-17 -68.0833 263.0833)">
			<stop  offset="0" style="stop-color:#FFFFFF"/>
			<stop  offset="0.1231" style="stop-color:#F2F2F2"/>
			<stop  offset="0.3517" style="stop-color:#CFCFCF"/>
			<stop  offset="0.6607" style="stop-color:#979797"/>
			<stop  offset="1" style="stop-color:#525252"/>
		</linearGradient>
		<rect x="1" y="0.5" fill="url(#fGrad4)" width="8" height="35"/>
	</g>
	<path id="outline_1_" d="M1,0.5h20c1.1,0,2,0.9,2,2v31c0,1.1-0.9,2-2,2H1V0.5 M24,2.5c0-1.1,0.9-2,2-2h20v35H26c-1.1,0-2-0.9-2-2
		V2.5 M0.5,0v36H21c1.4,0,2.5-1.1,2.5-2.5c0,1.4,1.1,2.5,2.5,2.5h20.5V0H26c-1.4,0-2.5,1.1-2.5,2.5C23.5,1.1,22.4,0,21,0H0.5L0.5,0z
		"/>
	<path opacity="0.1" fill="#FFFFFF" d="M2,1.5h19c0.6,0,1,0.4,1,1v31c0,0.6-0.4,1-1,1H2V1.5 M25,2.5
		c0-0.6,0.4-1,1-1h19v33H26c-0.6,0-1-0.4-1-1V2.5 M1,0.5v35h20c1.1,0,2-0.9,2-2v-31c0-1.1-0.9-2-2-2H1L1,0.5z M24,2.5v31
		c0,1.1,0.9,2,2,2h20v-35H26C24.9,0.5,24,1.4,24,2.5L24,2.5z"/>
	
		<linearGradient id="fGrad5" gradientUnits="userSpaceOnUse" x1="245.0833" y1="-1061.0476" x2="245.0833" y2="-1058.0729" gradientTransform="matrix(6.123234e-17 -1 -1 -6.123234e-17 -1034.0834 263.0833)">
		<stop  offset="0" style="stop-color:#FFFFFF;stop-opacity:0"/>
		<stop  offset="0.5" style="stop-color:#FFFFFF"/>
	</linearGradient>
	<path opacity="0.33" fill="url(#fGrad5)" d="M26,35.5h1v-1h-1c-0.6,0-1-0.4-1-1v-31c0-0.6,0.4-1,1-1
		h1v-1h-1c-1,0-1.8,0.7-2,1.6v31.8C24.2,34.8,25,35.5,26,35.5z"/>
</g>
</svg>  
</element> 
  
<!-- SEND -->

<element id=trackSendSvg>    
    <svg version="1.1"  display="block" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%"
         height="100%" viewBox="0 0 320 0.0001" xml:space="preserve">
    <rect class="sendPanelBg" fill="#333333" width="320" height="49"/>
    <path class="sendBg" fill="#262626" d="M244,0c-0.3,0-0.7,0-1,0v0H142h-17H27v0c-0.3,0-0.7,0-1,0C13.8,0,4,9.8,4,22s9.8,22,22,22
		c0.3,0,0.7,0,1,0v0h98h17h101v0c0.3,0,0.7,0,1,0c12.2,0,22-9.8,22-22S256.2,0,244,0z"/>
    <line class="sendLine" style="pointer-events:none" fill="none" opacity="0.5" stroke="#404040"  stroke-width="38" stroke-linecap="round" stroke-miterlimit="10" x1="27" y1="22" x2="130" y2="22"/>
    <text class="sendTitleText" style="pointer-events:none" transform="matrix(1 0 0 1 25 29)" fill="#A3A3A3" font-family="'Open Sans'" font-size="19px">Target Name</text>
    <text class="sDbText" style="pointer-events:none" text-anchor="end" transform="matrix(1 0 0 1 250 27)" fill="#A3A3A3" font-family="'Open Sans'" font-size="12px">xx dB</text>
	<circle class="sendThumb" opacity="0.5" fill="#808080" stroke="#262626" stroke-width="2" stroke-miterlimit="10" cx="26" cy="22" r="19"/>
       
        <g class="send_mute button">
            <g class="send_mute_off" visibility="visible">
                <path class="shadow" opacity="0.15" d="M314.4,45.2c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8
                    v-4.6h42.7v4.6H314.4z"/>
                    <linearGradient id="smoGrad" gradientUnits="userSpaceOnUse" x1="1720.0585" y1="-785.3847" x2="1720.0585" y2="-828.6583" gradientTransform="matrix(1 0 0 -1 -1427 -785)">
                    <stop  offset="0" style="stop-color:#404040"/>
                    <stop  offset="1" style="stop-color:#333333"/>
                </linearGradient>
                <path fill="url(#smoGrad)" d="M273.6,43.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39
                    c0,1.2-1,2.1-2.1,2.1H273.6z"/>
                <g>
                    <path fill="#805240" d="M293.1,25.9L293.1,25.9l4.2-10h2.2v12.3h-1.8V19h-0.1l-3.9,9.1h-1.2l-4-9.5h-0.1v9.5h-1.8V15.9h2.3
                        L293.1,25.9z"/>
                </g>
                <path class="mouseover" visibility="hidden" opacity="0.05" fill="#FFFFFF" d="M273.6,43.6c-1.2,0-2.1-1-2.1-2.1v-39 c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H273.6z"/>
            </g>
            <g class="send_mute_on" visibility="hidden">
                <path display="inline" fill="#F13F24" d="M273.6,43.6c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39
                    c0,1.2-1,2.1-2.1,2.1H273.6z"/>
                <g display="inline">
                    <path fill="#FFFFFF" d="M293.1,25.9L293.1,25.9l4.2-10h2.2v12.3h-1.8V19h-0.1l-3.9,9.1h-1.2l-4-9.5h-0.1v9.5h-1.8V15.9h2.3
                        L293.1,25.9z"/>
                </g>
                <path class="mouseover" visibility="hidden" opacity="0" fill="#FFFFFF" d="M273.6,43.6 c-1.2,0-2.1-1-2.1-2.1v-39c0-1.2,1-2.1,2.1-2.1h39c1.2,0,2.1,1,2.1,2.1v39c0,1.2-1,2.1-2.1,2.1H273.6z"/>
            </g>
            <path fill="#1A1A1A" d="M312.6,0.7c1,0,1.8,0.8,1.8,1.8v39c0,1-0.8,1.8-1.8,1.8h-39c-1,0-1.8-0.8-1.8-1.8v-39
                c0-1,0.8-1.8,1.8-1.8H312.6 M312.6,0.1h-39c-1.3,0-2.4,1.1-2.4,2.4v39c0,1.3,1.1,2.4,2.4,2.4h39c1.3,0,2.4-1.1,2.4-2.4v-39
                C315,1.2,313.9,0.1,312.6,0.1L312.6,0.1z"/>
        </g>
    </svg>            
</element>     
   
   results : <span id="_results" style="font-size : 0.7em">Here</span><br><br>
   
</div>
    
<script type="text/javascript">
    
function BtoMB(beats){
        var mbM = Math.floor(beats/ts_numerator);
        var mbB = beats - (mbM*ts_numerator);
        return (mbM + "." + mbB)
        }
    
var transitionsButton = document.getElementById("transitionsButton");
if(transitionsButton){
    doTransitionButton();
    transitionsButton.onclick = function(){
        transitions ^= 1;
        doTransitionButton();
        }
    }
    
function doTransitionButton(){
    if(transitions==1){
        transitionsButton.childNodes[3].setAttributeNS(null, "visibility", "visible");
        transitionsButton.childNodes[7].setAttributeNS(null, "visibility", "hidden");
        for (var i=0; i<hereCss.cssRules.length; i++){
            if(hereCss.cssRules[i].selectorText=="#optionsBar"){
                hereCss.deleteRule(i);
                hereCss.insertRule("#optionsBar {overflow-y: hidden;-webkit-transition: all 0.2s ease-out;-o-transition: all 0.2s ease-out;transition: all 0.2s ease-out;}",i);
                }
            }
        }
    else{
        transitionsButton.childNodes[3].setAttributeNS(null, "visibility", "hidden");
        transitionsButton.childNodes[7].setAttributeNS(null, "visibility", "visible");
        for (var i=0; i<hereCss.cssRules.length; i++){
            if(hereCss.cssRules[i].selectorText=="#optionsBar"){
                hereCss.deleteRule(i);
                hereCss.insertRule("#optionsBar {overflow-y: hidden;}",i);
                }
            }
        }
    }
    
var jogger = document.getElementById("jogger");
var joggerWidth = jogger.getBoundingClientRect()["width"];
jogger.addEventListener("mousedown", joggerHandler, false);
jogger.addEventListener('touchstart', function(event){
    if (event.touches.length > 0) joggerHandler(event);
    event.preventDefault(); 
    }, false);    
    
function joggerHandler(){
    var jOffsetX = 0;
    var mouseOnJogger = true;
    var jTimer = setInterval(joggerCounter, 100)
    
    if (event.targetTouches != undefined) {startX = event.targetTouches[0].pageX}
        else {startX = event.pageX}
    
    jogger.addEventListener('touchend', function(event){joggerUp();event.preventDefault();}, false);
    jogger.addEventListener("mouseup", joggerUp, false);
    
    function joggerUp(){
        mouseOnJogger = false;
        var joggerAggExp = Math.exp(Math.abs(joggerAgg)) * Math.sign(joggerAgg);
        
        if(statusPosition[1]=="Measures.Beats"){
            var joggerAggExpB = (Math.floor(Math.exp(Math.abs(joggerAgg)))) * Math.sign(joggerAgg);
            var sPs = statusPosition[0].split(".")
            var sumB = (parseInt(sPs[1]) + joggerAggExpB);
            var mbM = Math.floor(sumB/ts_numerator)
            var mbB = sumB - (mbM*ts_numerator);
            var newM = mbM + parseInt(sPs[0]);
                if(snapState==1) wwr_req("SET/POS_STR/" + newM + "." + mbB + ".00");
                else wwr_req("SET/POS_STR/" + newM + "." + mbB + "." + sPs[2]);
            }
        else{
            pos = parseFloat(playPosSeconds);
            wwr_req("SET/POS/" + (pos + joggerAggExp));
            }
        clearInterval(jTimer);
        joggerRotate(0);
        setTimeout(function(){ joggerAgg = "0"; }, 10);
        }
    
    jogger.addEventListener("mouseleave", joggerLeave, false);
                          
    function joggerLeave(){
        mouseOnJogger = false;
        clearInterval(jTimer);
        joggerRotate(0);
        joggerAgg = "0";
        }
    
    jogger.addEventListener("touchmove", function(event){joggerMove();event.preventDefault();}, false);
    jogger.addEventListener("mousemove", joggerMove, false);
    
    function joggerMove(){
        if(mouseOnJogger == true){
            
            if (event.changedTouches != undefined) { //we're doing touch stuff
                jOffsetX = (event.changedTouches[0].pageX - startX) / joggerWidth;
                }
            else {jOffsetX = (event.pageX - startX) / joggerWidth;}
            if(jOffsetX>0.5)(jOffsetX=0.5);
            if(jOffsetX<-0.5)(jOffsetX=-0.5);
            joggerRotate(jOffsetX*90);
            jMOffsetX = jOffsetX;
            }
        else{
            joggerRotate(0);
            }  
        }
    
    function joggerCounter(){
        if(mouseOnJogger == true){
        joggerAgg = parseFloat(joggerAgg) + jMOffsetX;
            }
        }
    }
    
function joggerRotate(angle){
    var wheel = document.getElementById("wheel");
    var wheelClipRect = document.getElementById("clip_rect");
    var wheelAngle = "rotate(" + angle + " 159 181)";
    var clipAngle = "rotate(" + (-1 * angle) + " 159 181)";
    wheel.setAttributeNS(null, "transform", wheelAngle);
    wheelClipRect.setAttributeNS(null, "transform", clipAngle);
    }    
    
var requestAnimationFrame = window.requestAnimationFrame || 
                window.mozRequestAnimationFrame || 
                window.webkitRequestAnimationFrame || 
                window.msRequestAnimationFrame;

function easeInOutCubic(t, b, c, d) {
    if ((t/=d/2) < 1){
    return c/2*t*t*t + b;}
    else{return c/2*((t-=2)*t*t + 2) + b;}
    };
  
</script>  


</body>
</html>
